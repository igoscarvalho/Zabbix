# Partindo do princpio que você terá 3 servidores para essa instalação e em todos eles será instalado o Zabbix Agent 2.
# Sendo os servidores: SRVZBXDB(192.168.15.9) / SRVZBXSERVER(192.168.15.10) / SRVZBXWEB(192.168.15.11)
# Realizar o comando abaixo no SRVZBXSERVER e no SRVZBXWEB:

wget https://repo.zabbix.com/zabbix/7.0/ubuntu/pool/main/z/zabbix-release/zabbix-release_latest_7.0+ubuntu24.04_all.deb
dpkg -i zabbix-release_latest_7.0+ubuntu24.04_all.deb
apt update
apt install zabbix-server-mysql zabbix-frontend-php zabbix-apache-conf zabbix-sql-scripts zabbix-agent2
apt install zabbix-agent2-plugin-mongodb zabbix-agent2-plugin-mssql zabbix-agent2-plugin-postgresql

# No DB faça a instalação do MySqlServer:
apt install mysql-server

# Configure o arquivo de mysqld.cnf para receber conexão de outros IP, no meu caso coloquei qualquer um:
vim /etc/mysql/mysql.conf.d/mysqld.cnf
bind-address = 0.0.0.0

# Ainda no DB faça a configuração do MySql para o Zabbix:
mysql -uroot -p
password
mysql> create database zabbix character set utf8mb4 collate utf8mb4_bin;
mysql> create user zabbix@localhost identified by 'zbx@db';
mysql> grant all privileges on zabbix.* to zabbix@localhost;
mysql> set global log_bin_trust_function_creators = 1;
mysql> quit;

# No SRVZBXSERVER, execute o comando abaixo:
zcat /usr/share/zabbix-sql-scripts/mysql/server.sql.gz | mysql --default-character-set=utf8mb4 -h 192.168.15.9 -uzabbix -p zabbix

# Após executar os comandos abaixo no MySQL no SRVZBXDB.
mysql -uroot -p
password
mysql> set global log_bin_trust_function_creators = 0;
mysql> quit;

# No SRVZBXSERVER alterar o arquivo de configuração, colocando o IP do banco + senha configurado anteriormente:

vim /etc/zabbix/zabbix_server.conf
DBHost=192.168.15.9
DBPassword=zbx@db
